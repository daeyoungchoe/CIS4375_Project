// including plugins
var gulp = require('gulp')
var autoprefixer = require('gulp-autoprefixer')
var gp_concat = require('gulp-concat')
var gp_rename = require('gulp-rename')
var gp_uglify = require('gulp-uglify')
// var to5 = require('gulp-6to5')
var path = require('path')

// don't minify this, keep it as ES6
gulp.task('copy-auth', function() {
    return gulp.src(
            ['./auth/**']
        )
        .pipe(gp_uglify())
        .pipe(gulp.dest('./dist/auth/'))
})

// gulp.task('copy-aws', function() {
//     return gulp.src(
//             ['./aws/**']
//         )
//         .pipe(gp_uglify())
//         .pipe(gulp.dest('./dist/aws/'))
// })

gulp.task('copy-aws', ['copy-s3-config'], function() {
    return gulp.src(
            ['./aws/index.js']
        )
        .pipe(gp_uglify())
        .pipe(gulp.dest('./dist/aws/'))
})

gulp.task('copy-s3-config', function() {
    return gulp.src(
            ['./aws/s3-configuration.txt']
        )
        .pipe(gulp.dest('./dist/aws/'))
})

gulp.task('copy-default', function() {
    return gulp.src(
            ['./default/**']
        )
        .pipe(gulp.dest('./dist/default/'))
})

gulp.task('copy-deploy', function() {
    return gulp.src(
            ['./deploy/**']
        )
        .pipe(gp_uglify())
        .pipe(gulp.dest('./dist/deploy/'))
})

gulp.task('copy-react', function() {
    return gulp.src(
            ['./react/**']
        )
        .pipe(gulp.dest('./dist/react/'))
})

gulp.task('copy-scaffold', function() {
    return gulp.src(
            ['./scaffold/**']
        )
        .pipe(gp_uglify())
        .pipe(gulp.dest('./dist/scaffold/'))
})

gulp.task('copy-template', function() {
    return gulp.src(
            ['./template/**']
        )
        .pipe(gulp.dest('./dist/template/'))
})

gulp.task('copy-extend', function() {
    return gulp.src(
            ['./extend/**']
        )
        .pipe(gulp.dest('./dist/extend/'))
})

gulp.task('copy-utils', function() {
    return gulp.src(
            ['./utils/**']
        )
        .pipe(gp_uglify())
        .pipe(gulp.dest('./dist/utils/'))
})

gulp.task('copy-vectors', function() {
    return gulp.src(
            ['./vectors/**']
        )
        .pipe(gp_uglify())
        .pipe(gulp.dest('./dist/vectors/'))
})

gulp.task('copy-package-json', function() {
    return gulp.src(
            ['./package.json']
        )
        .pipe(gulp.dest('./dist/'))
})


gulp.task('copy', ['copy-auth', 'copy-aws', 'copy-default', 'copy-deploy', 'copy-react', 'copy-scaffold', 'copy-template', 'copy-extend', 'copy-utils', 'copy-vectors', 'copy-package-json'], function(){})


gulp.task('build', ['copy'], function(){
    return gulp.src(
            ['./main.js']
        )
        .pipe(gp_uglify())
        .pipe(gp_rename('index.js'))
        .pipe(gulp.dest('./dist/'))
});

gulp.task('default', ['build'], function(){})
